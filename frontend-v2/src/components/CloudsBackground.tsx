import React, { useMemo } from 'react';

type CloudsBackgroundProps = {
  count?: number;
  opacity?: number;
};

// A few simple inline cloud SVGs as placeholders. Replace these with your own
// cloud SVG React components or image URLs by modifying CLOUD_SVGS.
const CLOUD_SVGS: React.ReactNode[] = [
  <svg
    width="228"
    height="76"
    viewBox="0 0 228 76"
    fill="none"
    xmlns="http://www.w3.org/2000/svg"
  >
    <path
      d="M227.812 75.557C224.926 69.925 219.378 65.696 213.152 64.505C206.4 63.214 198.907 64.723 194.124 69.66C193.057 64.148 188.438 59.497 182.934 58.391C177.429 57.286 170.413 58.914 167.3 63.587C166.996 59.53 162.62 56.772 158.552 56.768C154.484 56.765 150.709 57.505 147.134 59.447C156.491 50.294 157.723 34.682 151.659 23.082C145.595 11.482 133.402 3.86598 120.581 1.23098C107.76 -1.40402 94.368 0.466984 81.832 4.23298C71.289 7.39998 60.822 12.126 53.469 20.32C46.116 28.513 42.661 42.222 47.041 52.322C45.246 48.095 39.249 46.84 35.281 49.153C31.313 51.466 28.983 56.924 28.972 61.516C27.431 59.94 24.808 59.559 22.882 60.632C20.956 61.704 19.899 64.135 20.427 66.275C14.689 64.832 7.207 67.033 3.05099 71.244C1.80599 72.505 0.786 73.971 0 75.556L227.812 75.557Z"
      fill="#46FFE3"
    />
  </svg>,
  <svg
    width="229"
    height="62"
    viewBox="0 0 229 62"
    fill="none"
    xmlns="http://www.w3.org/2000/svg"
  >
    <path
      d="M201.678 35.0878C207.63 4.64379 153.824 -10.1102 133.753 7.6818C128.269 12.5428 126.021 19.1528 125.638 26.0588C115.83 19.5368 98.0046 22.5328 89.0686 29.4688C80.9996 17.0028 63.8876 11.9798 49.7066 14.0698C42.6326 15.1118 35.5826 18.1308 31.1556 23.9468C26.5036 30.0578 26.1306 37.6778 27.7766 44.8778C20.5916 45.1128 13.2216 44.5968 9.22161 46.4108C-1.45639 51.2548 -2.30139 60.0628 3.81561 60.0628C40.0626 60.0048 76.3156 58.9338 112.547 60.6168C131.178 61.4828 149.566 60.8518 168.18 59.8608C187.067 58.8548 206.057 58.1278 224.858 60.6868C226.091 60.8548 227.398 60.4088 227.741 59.0498C231.867 42.6958 216.172 30.0998 201.678 35.0878Z"
      fill="#46FFE3"
    />
  </svg>,
  <svg
    width="425"
    height="53"
    viewBox="0 0 425 53"
    fill="none"
    xmlns="http://www.w3.org/2000/svg"
  >
    <path
      d="M424.774 52.4115H0C0 52.4115 81.687 49.8985 98.025 44.8715C114.362 39.8445 125.673 33.5605 147.037 44.8715C142.01 22.2505 185.996 36.0745 185.996 36.0745C185.996 36.0745 188.509 -15.4515 228.725 4.65647C268.94 24.7635 324.236 48.6415 424.774 52.4115Z"
      fill="#46FFE3"
    />
  </svg>,
  <svg
    width="57"
    height="46"
    viewBox="0 0 57 46"
    fill="none"
    xmlns="http://www.w3.org/2000/svg"
  >
    <path
      fill-rule="evenodd"
      clip-rule="evenodd"
      d="M14.2011 25.8742C7.85711 21.0612 3.62511 6.8182 11.6321 1.81419C22.0421 -4.69181 26.6631 7.85119 29.2841 15.0062C27.5851 5.92319 39.5531 7.47819 39.2541 17.9652C52.2011 7.60419 64.1771 25.4732 49.9331 32.1312C54.0771 32.5422 59.1951 35.3542 55.3361 39.7582C51.5961 44.0272 39.7111 44.4992 34.8871 44.8152C28.3431 45.2432 19.6701 45.3152 13.1421 44.4332C-9.88889 41.3242 1.87711 13.0412 14.2011 25.8742Z"
      fill="#46FFE3"
    />
  </svg>,
  <svg
    width="221"
    height="63"
    viewBox="0 0 221 63"
    fill="none"
    xmlns="http://www.w3.org/2000/svg"
  >
    <path
      d="M218.773 57.018L209.976 53.592C209.269 47.186 204.798 41.338 198.802 38.977C192.807 36.615 185.548 37.843 180.664 42.046C175.326 18.507 152.502 0.156991 128.366 0.000990595C104.229 -0.154009 81.1697 17.899 75.5297 41.368C71.5997 36.424 61.8467 39.872 61.8987 46.188C60.1917 39.084 52.9317 33.757 45.6427 34.261C38.3537 34.764 31.8957 41.039 31.1807 48.31C24.1717 44.519 12.2887 46.941 10.2127 54.634L1.92565 56.936C-1.02035 57.754 -0.428349 62.094 2.62865 62.094H217.817C220.725 62.093 221.481 58.072 218.773 57.018Z"
      fill="#46FFE3"
    />
  </svg>,
  <svg
    width="195"
    height="101"
    viewBox="0 0 195 101"
    fill="none"
    xmlns="http://www.w3.org/2000/svg"
  >
    <path
      d="M53.6346 99.711C39.2246 99.711 3.50464 102.544 0.187641 82.005C-2.19536 67.255 18.7236 63.004 28.6426 71.24C13.9536 56.918 -2.72336 27.491 15.5046 8.42602C35.5566 -12.552 62.7006 9.66802 70.0476 31.199C68.2996 21.859 72.6066 11.304 83.5986 12.512C95.4626 13.818 94.4656 26.752 96.1276 35.557C121.476 9.63101 155.901 44.652 134.469 72.568C148.445 71.544 188.403 61.707 194.319 83.368C199.701 103.064 154.542 99.198 143.154 99.712C106.055 101.381 53.6346 99.711 53.6346 99.711Z"
      fill="#46FFE3"
    />
  </svg>,
  <svg
    width="206"
    height="65"
    viewBox="0 0 206 65"
    fill="none"
    xmlns="http://www.w3.org/2000/svg"
  >
    <path
      d="M0 64.3895H203.506C205.23 64.3895 204.79 63.1674 205.259 61.8044C201.42 49.4594 177.691 56.0665 167.134 56.4405C164.126 45.6395 157.739 22.2015 139.294 34.2815C140.375 16.3895 125.496 2.88544 105.511 0.412437C80.739 -2.65356 73.787 11.7834 68.55 30.1294C52.07 22.3814 28.127 35.4744 26.063 51.3964C15.507 46.7334 2.227 53.7095 0 64.3895Z"
      fill="#46FFE3"
    />
  </svg>,
  <svg
    width="292"
    height="81"
    viewBox="0 0 292 81"
    fill="none"
    xmlns="http://www.w3.org/2000/svg"
  >
    <path
      d="M291.169 70.9402C290.786 70.1382 289.357 69.7132 288.586 69.3782C287.395 68.8612 286.154 68.4682 284.876 68.2362C282.699 67.8402 280.524 67.9412 278.382 68.4042C278.873 63.9172 278.251 59.3932 276.059 55.3832C273.94 51.5062 270.553 48.4112 266.66 46.3672C259.426 42.5682 249.552 41.8082 242.622 46.7202C238.824 49.4132 236.677 53.4862 235.934 57.9942C230.896 57.4672 226.017 55.8682 220.945 55.5832C216.11 55.3112 211.743 56.6922 208.329 59.9632C207.711 52.4862 202.345 46.2862 196.159 42.3682C189.236 37.9832 180.321 35.5902 172.199 37.4612C168.472 38.3202 165.157 40.1862 162.563 42.9222C161.466 33.1592 157.337 24.0522 150.494 16.9162C143.67 9.80022 134.689 4.90422 125.231 2.28722C116.216 -0.206782 106.455 -0.821774 97.295 1.24523C89.288 3.05123 81.515 7.05623 76.781 13.9572C71.619 21.4822 71.397 30.9332 73.542 39.5352C71.154 36.8802 68.028 35.1632 64.091 35.9812C58.869 37.0662 54.582 41.5062 51.299 45.4282C49.712 47.3232 48.244 49.3162 46.864 51.3662C42.533 41.8742 31.837 36.3072 21.599 36.3422C16.393 36.3602 11.203 37.9022 7.142 41.2262C1.945 45.4802 0 51.9102 0 58.6132C0 70.1842 6.26 77.3652 11.275 77.3652C34.048 77.4202 56.822 77.7332 79.591 78.0852C104.832 78.4762 130.073 78.9362 155.314 79.3132C180.486 79.6902 205.66 79.9882 230.835 80.0372C238.134 80.0512 245.4 80.0432 252.69 80.3572C259.161 80.6362 265.653 80.8492 272.126 80.5242C277.274 80.2662 283.285 79.9802 287.893 77.3982C289.407 76.5502 290.79 75.2872 291.207 73.5422C291.382 72.8152 291.504 71.6422 291.169 70.9402Z"
      fill="#46FFE3"
    />
  </svg>,
  <svg
    width="123"
    height="23"
    viewBox="0 0 123 23"
    fill="none"
    xmlns="http://www.w3.org/2000/svg"
  >
    <path
      d="M117.273 7.99087C111.945 3.86687 105.223 -2.22711 84.4093 0.825893C63.5953 3.87789 66.5683 10.5819 53.3993 8.42288C40.2303 6.26388 32.5444 -1.80811 12.1094 6.88989C-8.32564 15.5879 -1.60767 21.0119 22.5973 20.9019C46.8023 20.7929 70.5414 17.6599 84.4104 20.7439C98.2794 23.8289 136.994 23.2529 117.273 7.99087Z"
      fill="#46FFE3"
    />
  </svg>,
  <svg
    width="182"
    height="45"
    viewBox="0 0 182 45"
    fill="none"
    xmlns="http://www.w3.org/2000/svg"
  >
    <path
      d="M170.021 19.9609C149.68 2.56395 140.288 16.278 125.987 18.933C111.686 21.588 115.869 9.88695 94.2589 2.53795C72.6489 -4.81105 64.5849 5.45795 58.2989 12.3359C55.2579 15.6639 46.6489 20.786 44.7339 20.441C32.4599 18.23 27.1609 7.14394 9.79889 22.1539C-7.56311 37.1649 -0.696091 44.907 21.2929 42.729C35.6739 41.305 49.7259 35.266 61.3189 36.743C70.4969 37.912 82.3089 40.143 89.8379 38.449C93.4499 38.305 97.1729 37.804 100.499 36.88C115.511 36.542 135.807 42.067 156.744 44.028C182.403 46.431 190.363 37.3579 170.021 19.9609Z"
      fill="#46FFE3"
    />
  </svg>,
  <svg
    width="230"
    height="76"
    viewBox="0 0 230 76"
    fill="none"
    xmlns="http://www.w3.org/2000/svg"
  >
    <path
      d="M0.789429 40.4592C1.02943 39.4022 2.15944 38.9402 3.13144 39.1302C12.3564 40.9302 21.5724 36.9522 30.8444 37.8542C30.9074 -1.05683 86.4444 -9.56483 112.365 10.4632C119.675 16.1112 124.239 23.9112 125.738 32.8712C141.182 29.4342 158.785 32.2262 173.889 35.3812C190.622 38.8762 210.787 44.3692 222.938 57.2632C227.412 62.0112 232.358 72.0482 227.54 74.6212C225.754 75.5752 225.13 75.9602 223.027 75.1732C202.402 69.3182 180.544 68.3442 159.222 68.2762C138.816 68.2112 118.077 68.0892 97.7124 69.4502C83.6364 70.3912 69.6204 72.0512 55.5134 72.5422C42.2624 73.0032 27.6894 73.1892 15.1524 68.2282C2.95744 63.4012 -2.09057 53.1822 0.789429 40.4592Z"
      fill="#46FFE3"
    />
  </svg>,
  <svg
    width="90"
    height="29"
    viewBox="0 0 90 29"
    fill="none"
    xmlns="http://www.w3.org/2000/svg"
  >
    <path
      d="M89.786 28.0269H0C0 28.0269 8.628 4.0579 23.487 0.4349C38.346 -3.1881 47.026 16.9659 53.961 18.6929C64.395 21.2919 71.32 -8.96454e-05 89.786 28.0269Z"
      fill="#46FFE3"
    />
  </svg>,
];

function randBetween(min: number, max: number) {
  return Math.random() * (max - min) + min;
}

export default function CloudsBackground({
  count = 10,
  opacity = 0.2,
}: CloudsBackgroundProps) {
  // Pre-compute cloud parameters so they are stable for the render lifetime
  const clouds = useMemo(() => {
    return Array.from({ length: count }).map((_, i) => {
      const svg = CLOUD_SVGS[i % CLOUD_SVGS.length];
      const top = randBetween(2, 100); // percent from top
      const scale = randBetween(0.6, 1.8);
      const duration = randBetween(75, 90); // seconds to cross
      const delay = -randBetween(0, 60); // negative to start at different phases
      const leftStart = randBetween(100, 220); // start off-screen to the right (vw)
      const zIndex = 0;

      return {
        key: `cloud-${i}`,
        svg,
        top,
        scale,
        duration,
        delay,
        leftStart,
        zIndex,
      };
    });
  }, [count, opacity]);

  return (
    <div className="clouds-bg" aria-hidden style={{ opacity }}>
      {clouds.map((c) => (
        <div
          key={c.key}
          className="cloud"
          style={{
            top: `${c.top}%`,
            left: `${c.leftStart}vw`,
            transform: `scale(${c.scale})`,
            animationDuration: `${c.duration}s`,
            animationDelay: `${c.delay}s`,
            zIndex: c.zIndex,
          }}
        >
          {c.svg}
        </div>
      ))}
    </div>
  );
}
